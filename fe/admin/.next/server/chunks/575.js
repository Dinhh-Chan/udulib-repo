"use strict";exports.id=575,exports.ids=[575],exports.modules={1153:(e,s,t)=>{t.d(s,{HK:()=>r,Nn:()=>a,ui:()=>l});var n=t(4915);async function r(){try{let e=await fetch("http://localhost:8001/api/v1/documents/");if(!e.ok)throw Error("Kh\xf4ng thể tải danh s\xe1ch t\xe0i liệu");return(await e.json()).documents}catch(e){return console.error("Error fetching documents:",e),n.oR.error("Kh\xf4ng thể tải danh s\xe1ch t\xe0i liệu"),[]}}async function l(e){try{let s=await fetch("http://localhost:8001/api/v1/documents/",{method:"POST",body:e});if(!s.ok)throw Error("Kh\xf4ng thể tạo t\xe0i liệu mới");let t=await s.json();return n.oR.success("Tạo t\xe0i liệu th\xe0nh c\xf4ng"),t}catch(e){return console.error("Error creating document:",e),n.oR.error("Kh\xf4ng thể tạo t\xe0i liệu mới"),null}}async function a(e){try{if(!(await fetch(`http://localhost:8001/api/v1/documents/${e}`,{method:"DELETE"})).ok)throw Error("Kh\xf4ng thể x\xf3a t\xe0i liệu");return n.oR.success("X\xf3a t\xe0i liệu th\xe0nh c\xf4ng"),!0}catch(e){return console.error("Error deleting document:",e),n.oR.error("Kh\xf4ng thể x\xf3a t\xe0i liệu"),!1}}},8414:(e,s,t)=>{t.d(s,{Select:()=>o,SelectContent:()=>p,SelectItem:()=>g,SelectTrigger:()=>x,SelectValue:()=>h});var n=t(5781),r=t(3072),l=t(5332),a=t(1776),i=t(8613),d=t(8108),c=t(7401);let o=l.bL;l.YJ;let h=l.WT,x=r.forwardRef(({className:e,children:s,...t},r)=>(0,n.jsxs)(l.l9,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,n.jsx)(l.In,{asChild:!0,children:(0,n.jsx)(a.A,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.l9.displayName;let m=r.forwardRef(({className:e,...s},t)=>(0,n.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,n.jsx)(i.A,{className:"h-4 w-4"})}));m.displayName=l.PP.displayName;let u=r.forwardRef(({className:e,...s},t)=>(0,n.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,n.jsx)(a.A,{className:"h-4 w-4"})}));u.displayName=l.wn.displayName;let p=r.forwardRef(({className:e,children:s,position:t="popper",...r},a)=>(0,n.jsx)(l.ZL,{children:(0,n.jsxs)(l.UC,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,n.jsx)(m,{}),(0,n.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(u,{})]})}));p.displayName=l.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,n.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.JU.displayName;let g=r.forwardRef(({className:e,children:s,...t},r)=>(0,n.jsxs)(l.q7,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(l.VF,{children:(0,n.jsx)(d.A,{className:"h-4 w-4"})})}),(0,n.jsx)(l.p4,{children:s})]}));g.displayName=l.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,n.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.wv.displayName},9509:(e,s,t)=>{t.d(s,{A:()=>n});let n=(0,t(2752).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9575:(e,s,t)=>{t.d(s,{DocumentsTable:()=>C});var n=t(5781),r=t(3072),l=t(9192),a=t(1589),i=t(4238),d=t(6909),c=t(9509),o=t(4455),h=t(1225),x=t(9173),m=t(4926),u=t(1978),p=t(4132),g=t(9839),j=t(3352),f=t(8414),N=t(4915);function y({document:e,open:s,onOpenChange:t,onSuccess:l}){let[a,d]=(0,r.useState)(!1),c=async s=>{s.preventDefault(),d(!0);try{let n=new FormData(s.currentTarget),r={title:n.get("title"),description:n.get("description"),status:n.get("status")};if(!(await fetch(`http://localhost:8001/api/v1/documents/${e.document_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Kh\xf4ng thể cập nhật t\xe0i liệu");N.oR.success("Cập nhật t\xe0i liệu th\xe0nh c\xf4ng"),t(!1),l?.()}catch(e){console.error("Error updating document:",e),N.oR.error("Kh\xf4ng thể cập nhật t\xe0i liệu")}finally{d(!1)}};return(0,n.jsx)(u.lG,{open:s,onOpenChange:t,children:(0,n.jsxs)(u.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(u.c7,{children:[(0,n.jsx)(u.L3,{children:"Chỉnh sửa t\xe0i liệu"}),(0,n.jsx)(u.rr,{children:"Cập nhật th\xf4ng tin t\xe0i liệu. Nhấn Lưu khi ho\xe0n tất."})]}),(0,n.jsxs)("form",{onSubmit:c,children:[(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(g.J,{htmlFor:"title",className:"text-right",children:"T\xean t\xe0i liệu"}),(0,n.jsx)(p.p,{id:"title",name:"title",className:"col-span-3",defaultValue:e.title,required:!0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(g.J,{htmlFor:"description",className:"text-right",children:"M\xf4 tả"}),(0,n.jsx)(j.T,{id:"description",name:"description",className:"col-span-3",defaultValue:e.description||""})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(g.J,{htmlFor:"status",className:"text-right",children:"Trạng th\xe1i"}),(0,n.jsxs)(f.Select,{name:"status",defaultValue:e.status,children:[(0,n.jsx)(f.SelectTrigger,{className:"col-span-3",children:(0,n.jsx)(f.SelectValue,{placeholder:"Chọn trạng th\xe1i"})}),(0,n.jsxs)(f.SelectContent,{children:[(0,n.jsx)(f.SelectItem,{value:"approved",children:"Đ\xe3 duyệt"}),(0,n.jsx)(f.SelectItem,{value:"pending",children:"Chờ duyệt"}),(0,n.jsx)(f.SelectItem,{value:"rejected",children:"Từ chối"})]})]})]})]}),(0,n.jsx)(u.Es,{children:(0,n.jsx)(i.$,{type:"submit",disabled:a,children:a?"Đang lưu...":"Lưu"})})]})]})})}var b=t(7401),v=t(1153);function w({document:e,open:s,onOpenChange:t,onEdit:l,onDelete:a}){let[d,c]=(0,r.useState)(!1),p=async()=>{try{c(!0),await (0,v.Nn)(e.document_id)&&(N.oR.success("X\xf3a t\xe0i liệu th\xe0nh c\xf4ng"),t(!1),a?.())}catch(e){console.error("Error deleting document:",e),N.oR.error("Kh\xf4ng thể x\xf3a t\xe0i liệu")}finally{c(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.lG,{open:s,onOpenChange:t,children:(0,n.jsxs)(u.Cf,{className:"max-w-2xl",children:[(0,n.jsxs)(u.c7,{children:[(0,n.jsx)(u.L3,{className:"text-2xl",children:e.title}),(0,n.jsx)(u.rr,{children:"Th\xf4ng tin chi tiết về t\xe0i liệu"})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Th\xf4ng tin cơ bản"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"M\xf4 tả:"}),(0,n.jsx)("p",{className:"mt-1",children:e.description||"Kh\xf4ng c\xf3 m\xf4 tả"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"M\xf4n học:"}),(0,n.jsx)("p",{className:"mt-1",children:e.subject?.subject_name||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Người tải l\xean:"}),(0,n.jsx)("p",{className:"mt-1",children:e.user?.username||"N/A"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Th\xf4ng tin file"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Loại file:"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(x.E,{variant:"outline",className:e.file_type.toLowerCase().includes("pdf")?"bg-red-50 text-red-700 border-red-200":e.file_type.toLowerCase().includes("doc")?"bg-blue-50 text-blue-700 border-blue-200":e.file_type.toLowerCase().includes("xls")?"bg-green-50 text-green-700 border-green-200":e.file_type.toLowerCase().includes("ppt")?"bg-orange-50 text-orange-700 border-orange-200":e.file_type.toLowerCase().includes("txt")?"bg-gray-50 text-gray-700 border-gray-200":"bg-purple-50 text-purple-700 border-purple-200",children:e.file_type.toUpperCase()})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"K\xedch thước:"}),(0,n.jsx)("p",{className:"mt-1",children:(0,b.v)(e.file_size)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Đường dẫn:"}),(0,n.jsx)("p",{className:"mt-1 break-all",children:e.file_path})]})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Thống k\xea"}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Lượt xem:"}),(0,n.jsx)("p",{className:"mt-1",children:e.view_count})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Lượt tải:"}),(0,n.jsx)("p",{className:"mt-1",children:e.download_count})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Đ\xe1nh gi\xe1:"}),(0,n.jsxs)("p",{className:"mt-1",children:[e.average_rating.toFixed(1),"/5.0"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Trạng th\xe1i:"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(x.E,{variant:"outline",className:"approved"===e.status?"bg-green-50 text-green-700 border-green-200":"pending"===e.status?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200",children:"approved"===e.status?"Đ\xe3 duyệt":"pending"===e.status?"Chờ duyệt":"Từ chối"})})]})]})]}),e.tags.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Tags"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>(0,n.jsx)(x.E,{variant:"secondary",children:e.tag_name},e.tag_id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Thời gian"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Ng\xe0y tạo:"}),(0,n.jsx)("p",{className:"mt-1",children:new Date(e.created_at).toLocaleString("vi-VN")})]}),e.updated_at&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Cập nhật lần cuối:"}),(0,n.jsx)("p",{className:"mt-1",children:new Date(e.updated_at).toLocaleString("vi-VN")})]})]})]})]}),(0,n.jsx)(u.Es,{children:(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsxs)(i.$,{variant:"outline",onClick:()=>l?.(e),className:"gap-2",children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),"Chỉnh sửa"]}),(0,n.jsxs)(i.$,{variant:"destructive",onClick:()=>c(!0),className:"gap-2",children:[(0,n.jsx)(h.A,{className:"h-4 w-4"}),"X\xf3a"]})]})})]})}),(0,n.jsx)(m.Lt,{open:d,onOpenChange:c,children:(0,n.jsxs)(m.EO,{children:[(0,n.jsxs)(m.wd,{children:[(0,n.jsx)(m.r7,{children:"X\xe1c nhận x\xf3a"}),(0,n.jsxs)(m.$v,{children:['Bạn c\xf3 chắc chắn muốn x\xf3a t\xe0i liệu "',e.title,'"? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.']})]}),(0,n.jsxs)(m.ck,{children:[(0,n.jsx)(m.Zr,{children:"Hủy"}),(0,n.jsx)(m.Rx,{onClick:p,className:"bg-red-600 hover:bg-red-700",children:"X\xf3a"})]})]})})]})}function C(){let[e,s]=(0,r.useState)([]),[t,u]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[N,b]=(0,r.useState)(null),C=async()=>{try{u(!0);let e=await (0,v.HK)();s(e)}catch(e){console.error("Error fetching documents:",e),s([])}finally{u(!1)}},_=async e=>{try{await (0,v.Nn)(e)&&(f(null),C())}catch(e){console.error("Error deleting document:",e)}};return t?(0,n.jsx)("div",{children:"Đang tải..."}):(0,n.jsxs)("div",{className:"rounded-md border",children:[(0,n.jsxs)(l.XI,{children:[(0,n.jsx)(l.A0,{children:(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nd,{children:"T\xean t\xe0i liệu"}),(0,n.jsx)(l.nd,{children:"M\xf4n học"}),(0,n.jsx)(l.nd,{children:"Người tải l\xean"}),(0,n.jsx)(l.nd,{children:"Loại file"}),(0,n.jsx)(l.nd,{children:"Trạng th\xe1i"}),(0,n.jsx)(l.nd,{className:"text-right",children:"H\xe0nh động"})]})}),(0,n.jsx)(l.BF,{children:0===e.length?(0,n.jsx)(l.Hj,{children:(0,n.jsx)(l.nA,{colSpan:6,className:"text-center",children:"Kh\xf4ng c\xf3 dữ liệu"})}):e.map(e=>(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nA,{className:"font-medium",children:e.title}),(0,n.jsx)(l.nA,{children:e.subject?.subject_name||"N/A"}),(0,n.jsx)(l.nA,{children:e.user?.username||"N/A"}),(0,n.jsx)(l.nA,{children:(0,n.jsx)(x.E,{variant:"outline",className:e.file_type.toLowerCase().includes("pdf")?"bg-red-50 text-red-700 border-red-200":e.file_type.toLowerCase().includes("doc")?"bg-blue-50 text-blue-700 border-blue-200":e.file_type.toLowerCase().includes("xls")?"bg-green-50 text-green-700 border-green-200":e.file_type.toLowerCase().includes("ppt")?"bg-orange-50 text-orange-700 border-orange-200":e.file_type.toLowerCase().includes("txt")?"bg-gray-50 text-gray-700 border-gray-200":"bg-purple-50 text-purple-700 border-purple-200",children:e.file_type.toUpperCase()})}),(0,n.jsx)(l.nA,{children:(0,n.jsx)(x.E,{variant:"outline",className:"approved"===e.status?"bg-green-50 text-green-700 border-green-200":"pending"===e.status?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200",children:"approved"===e.status?"Đ\xe3 duyệt":"pending"===e.status?"Chờ duyệt":"Từ chối"})}),(0,n.jsx)(l.nA,{className:"text-right",children:(0,n.jsxs)(a.rI,{children:[(0,n.jsx)(a.ty,{asChild:!0,children:(0,n.jsxs)(i.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,n.jsx)("span",{className:"sr-only",children:"Mở menu"}),(0,n.jsx)(d.A,{className:"h-4 w-4"})]})}),(0,n.jsxs)(a.SQ,{align:"end",children:[(0,n.jsx)(a.lp,{children:"H\xe0nh động"}),(0,n.jsx)(a.mB,{}),(0,n.jsxs)(a._2,{onClick:()=>b(e),children:[(0,n.jsx)(c.A,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Xem chi tiết"})]}),(0,n.jsxs)(a._2,{onClick:()=>g(e),children:[(0,n.jsx)(o.A,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Chỉnh sửa"})]}),(0,n.jsxs)(a._2,{onClick:()=>f(e),children:[(0,n.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"X\xf3a"})]})]})]})})]},e.document_id))})]}),(0,n.jsx)(m.Lt,{open:!!j,onOpenChange:e=>!e&&f(null),children:(0,n.jsxs)(m.EO,{children:[(0,n.jsxs)(m.wd,{children:[(0,n.jsx)(m.r7,{children:"X\xe1c nhận x\xf3a"}),(0,n.jsxs)(m.$v,{children:['Bạn c\xf3 chắc chắn muốn x\xf3a t\xe0i liệu "',j?.title,'"? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.']})]}),(0,n.jsxs)(m.ck,{children:[(0,n.jsx)(m.Zr,{children:"Hủy"}),(0,n.jsx)(m.Rx,{onClick:()=>j&&_(j.document_id),className:"bg-red-600 hover:bg-red-700",children:"X\xf3a"})]})]})}),p&&(0,n.jsx)(y,{document:p,open:!!p,onOpenChange:e=>!e&&g(null),onSuccess:C}),N&&(0,n.jsx)(w,{document:N,open:!!N,onOpenChange:e=>!e&&b(null),onEdit:e=>{b(null),g(e)},onDelete:C})]})}}};