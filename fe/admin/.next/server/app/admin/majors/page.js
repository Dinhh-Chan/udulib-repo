(()=>{var e={};e.id=533,e.ids=[533],e.modules={60:(e,r,n)=>{"use strict";n.d(r,{MajorsTable:()=>s});let s=(0,n(1129).registerClientReference)(function(){throw Error("Attempted to call MajorsTable() from the server but MajorsTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/components/admin/majors-table.tsx","MajorsTable")},751:(e,r,n)=>{"use strict";n.d(r,{MajorsTable:()=>y});var s=n(5781),t=n(3072),a=n(4238),o=n(4132),i=n(9192),d=n(1589),l=n(6909),c=n(4455),h=n(1225),m=n(9173),u=n(1978),p=n(9839),j=n(3352),x=n(3286),g=n(4915);function f({major:e,open:r,onOpenChange:n,onSuccess:i}){let[d,l]=(0,t.useState)(e.major_name),[c,h]=(0,t.useState)(e.major_code),[m,f]=(0,t.useState)(e.description||""),[v,b]=(0,t.useState)(!1),y=async r=>{r.preventDefault(),b(!0);try{await (0,x.t)(e.major_id,{major_name:d,major_code:c,description:m||void 0}),g.oR.success("Cập nhật ng\xe0nh học th\xe0nh c\xf4ng"),i?.(),n(!1)}catch(e){e instanceof Error?g.oR.error(e.message):g.oR.error("Kh\xf4ng thể cập nhật ng\xe0nh học"),console.error(e)}finally{b(!1)}};return(0,s.jsx)(u.lG,{open:r,onOpenChange:n,children:(0,s.jsx)(u.Cf,{className:"sm:max-w-[425px]",children:(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Chỉnh sửa ng\xe0nh học"}),(0,s.jsx)(u.rr,{children:"Chỉnh sửa th\xf4ng tin ng\xe0nh học."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"major_name",children:"T\xean ng\xe0nh học"}),(0,s.jsx)(o.p,{id:"major_name",value:d,onChange:e=>l(e.target.value),placeholder:"Nhập t\xean ng\xe0nh học",required:!0,disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"major_code",children:"M\xe3 ng\xe0nh"}),(0,s.jsx)(o.p,{id:"major_code",value:c,onChange:e=>h(e.target.value),placeholder:"Nhập m\xe3 ng\xe0nh",required:!0,disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"description",children:"M\xf4 tả"}),(0,s.jsx)(j.T,{id:"description",value:m,onChange:e=>f(e.target.value),placeholder:"Nhập m\xf4 tả ng\xe0nh học",disabled:v})]})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(a.$,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:v,children:"Hủy"}),(0,s.jsx)(a.$,{type:"submit",disabled:v,children:v?"Đang lưu...":"Lưu thay đổi"})]})]})})})}var v=n(4926);function b({major:e,open:r,onOpenChange:n,onConfirm:t}){return(0,s.jsx)(v.Lt,{open:r,onOpenChange:n,children:(0,s.jsxs)(v.EO,{children:[(0,s.jsxs)(v.wd,{children:[(0,s.jsx)(v.r7,{children:"Bạn c\xf3 chắc chắn muốn x\xf3a?"}),(0,s.jsxs)(v.$v,{children:['H\xe0nh động n\xe0y sẽ x\xf3a ng\xe0nh học "',e.major_name,'" v\xe0 kh\xf4ng thể ho\xe0n t\xe1c. Tất cả m\xf4n học v\xe0 t\xe0i liệu li\xean quan sẽ bị ảnh hưởng.']})]}),(0,s.jsxs)(v.ck,{children:[(0,s.jsx)(v.Zr,{children:"Hủy"}),(0,s.jsx)(v.Rx,{onClick:t,className:"bg-red-500 hover:bg-red-600",children:"X\xf3a"})]})]})})}function y(){let[e,r]=(0,t.useState)([]),[n,u]=(0,t.useState)(!0),[p,j]=(0,t.useState)(""),[v,y]=(0,t.useState)(null),[w,N]=(0,t.useState)(null),C=async()=>{try{let e=await (0,x.L$)();r(e)}catch(e){g.oR.error("Kh\xf4ng thể tải danh s\xe1ch ng\xe0nh học"),console.error(e)}finally{u(!1)}},_=async e=>{try{await (0,x.rQ)(e.major_id),g.oR.success("X\xf3a ng\xe0nh học th\xe0nh c\xf4ng"),C()}catch(e){e instanceof Error?g.oR.error(e.message):g.oR.error("Kh\xf4ng thể x\xf3a ng\xe0nh học"),console.error(e)}},k=e.filter(e=>e.major_name.toLowerCase().includes(p.toLowerCase())||e.major_code.toLowerCase().includes(p.toLowerCase()));return n?(0,s.jsx)("div",{children:"Đang tải..."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(o.p,{placeholder:"T\xecm kiếm ng\xe0nh học...",value:p,onChange:e=>j(e.target.value),className:"max-w-sm"})}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(i.XI,{children:[(0,s.jsx)(i.A0,{children:(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nd,{children:"T\xean ng\xe0nh học"}),(0,s.jsx)(i.nd,{children:"M\xe3 ng\xe0nh"}),(0,s.jsx)(i.nd,{children:"M\xf4 tả"}),(0,s.jsx)(i.nd,{className:"text-right",children:"H\xe0nh động"})]})}),(0,s.jsx)(i.BF,{children:0===k.length?(0,s.jsx)(i.Hj,{children:(0,s.jsx)(i.nA,{colSpan:4,className:"text-center",children:"Kh\xf4ng c\xf3 dữ liệu"})}):k.map(e=>(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nA,{className:"font-medium",children:e.major_name}),(0,s.jsx)(i.nA,{children:(0,s.jsx)(m.E,{variant:"outline",children:e.major_code})}),(0,s.jsx)(i.nA,{children:e.description||"-"}),(0,s.jsx)(i.nA,{className:"text-right",children:(0,s.jsxs)(d.rI,{children:[(0,s.jsx)(d.ty,{asChild:!0,children:(0,s.jsxs)(a.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Mở menu"}),(0,s.jsx)(l.A,{className:"h-4 w-4"})]})}),(0,s.jsxs)(d.SQ,{align:"end",children:[(0,s.jsx)(d.lp,{children:"H\xe0nh động"}),(0,s.jsx)(d.mB,{}),(0,s.jsxs)(d._2,{onClick:()=>y(e),children:[(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Chỉnh sửa"})]}),(0,s.jsxs)(d._2,{onClick:()=>N(e),children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"X\xf3a"})]})]})]})})]},e.major_id))})]})}),v&&(0,s.jsx)(f,{major:v,open:!!v,onOpenChange:e=>!e&&y(null),onSuccess:C}),w&&(0,s.jsx)(b,{major:w,open:!!w,onOpenChange:e=>!e&&N(null),onConfirm:()=>_(w)})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2138:(e,r,n)=>{"use strict";n.r(r),n.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=n(7025),t=n(8198),a=n(2576),o=n.n(a),i=n(5239),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);n.d(r,d);let l={children:["",{children:["admin",{children:["majors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,8223)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/majors/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,254)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/layout.tsx"],loading:[()=>Promise.resolve().then(n.bind(n,9654)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(n.t.bind(n,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,3117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/majors/page.tsx"],h={require:n,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/admin/majors/page",pathname:"/admin/majors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2519:(e,r,n)=>{"use strict";n.d(r,{cn:()=>a});var s=n(6576),t=n(7885);function a(...e){return(0,t.QP)((0,s.$)(e))}},2936:(e,r,n)=>{Promise.resolve().then(n.bind(n,3453)),Promise.resolve().then(n.bind(n,751))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3208:(e,r,n)=>{Promise.resolve().then(n.bind(n,3659)),Promise.resolve().then(n.bind(n,60))},3286:(e,r,n)=>{"use strict";n.d(r,{L$:()=>t,Ys:()=>a,rQ:()=>i,t:()=>o});let s="http://localhost:8001/api/v1";async function t(){let e=await fetch(`${s}/majors`);if(!e.ok)throw Error("Failed to fetch majors");return e.json()}async function a(e){try{let r=await fetch(`${s}/majors/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json().catch(()=>null);throw Error(e?.message||"Failed to create major")}return r.json()}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("Failed to create major")}}async function o(e,r){try{let n=await fetch(`${s}/majors/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){let e=await n.json().catch(()=>null);throw Error(e?.message||"Failed to update major")}return n.json()}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("Failed to update major")}}async function i(e){try{let r=await fetch(`${s}/majors/${e}`,{method:"DELETE"});if(!r.ok){let e=await r.json().catch(()=>null);throw Error(e?.message||"Failed to delete major")}}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("Failed to delete major")}}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3453:(e,r,n)=>{"use strict";n.d(r,{AddMajorDialog:()=>m});var s=n(5781),t=n(3072),a=n(1978),o=n(4238),i=n(4132),d=n(9839),l=n(3352),c=n(3286),h=n(4915);function m({children:e,onSuccess:r}){let[n,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)(""),[j,x]=(0,t.useState)(""),[g,f]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),y=async e=>{e.preventDefault(),b(!0);try{await (0,c.Ys)({major_name:u,major_code:j,description:g||void 0}),h.oR.success("Th\xeam ng\xe0nh học th\xe0nh c\xf4ng"),r?.(),m(!1),p(""),x(""),f("")}catch(e){e instanceof Error?h.oR.error(e.message):h.oR.error("Kh\xf4ng thể th\xeam ng\xe0nh học"),console.error(e)}finally{b(!1)}};return(0,s.jsxs)(a.lG,{open:n,onOpenChange:m,children:[(0,s.jsx)(a.zM,{asChild:!0,children:e}),(0,s.jsx)(a.Cf,{className:"sm:max-w-[425px]",children:(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)(a.c7,{children:[(0,s.jsx)(a.L3,{children:"Th\xeam ng\xe0nh học mới"}),(0,s.jsx)(a.rr,{children:"Nhập th\xf4ng tin ng\xe0nh học mới v\xe0o form b\xean dưới."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"major_name",children:"T\xean ng\xe0nh học"}),(0,s.jsx)(i.p,{id:"major_name",value:u,onChange:e=>p(e.target.value),placeholder:"Nhập t\xean ng\xe0nh học",required:!0,disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"major_code",children:"M\xe3 ng\xe0nh"}),(0,s.jsx)(i.p,{id:"major_code",value:j,onChange:e=>x(e.target.value),placeholder:"Nhập m\xe3 ng\xe0nh",required:!0,disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"description",children:"M\xf4 tả"}),(0,s.jsx)(l.T,{id:"description",value:g,onChange:e=>f(e.target.value),placeholder:"Nhập m\xf4 tả ng\xe0nh học",disabled:v})]})]}),(0,s.jsxs)(a.Es,{children:[(0,s.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>m(!1),disabled:v,children:"Hủy"}),(0,s.jsx)(o.$,{type:"submit",disabled:v,children:v?"Đang th\xeam...":"Th\xeam ng\xe0nh học"})]})]})})]})}},3659:(e,r,n)=>{"use strict";n.d(r,{AddMajorDialog:()=>s});let s=(0,n(1129).registerClientReference)(function(){throw Error("Attempted to call AddMajorDialog() from the server but AddMajorDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/components/admin/add-major-dialog.tsx","AddMajorDialog")},3873:e=>{"use strict";e.exports=require("path")},6436:(e,r,n)=>{"use strict";n.d(r,{$:()=>l});var s=n(5479),t=n(3250),a=n(2184),o=n(2040),i=n(2519);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef(({className:e,variant:r,size:n,asChild:t=!1,...o},l)=>{let c=t?a.DX:"button";return(0,s.jsx)(c,{className:(0,i.cn)(d({variant:r,size:n,className:e})),ref:l,...o})});l.displayName="Button"},8178:(e,r,n)=>{"use strict";n.d(r,{Wu:()=>l,ZB:()=>d,Zp:()=>o,aR:()=>i});var s=n(5479),t=n(3250),a=n(2519);let o=t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));o.displayName="Card";let i=t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let d=t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle",t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",t.forwardRef(({className:e,...r},n)=>(0,s.jsx)("div",{ref:n,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},8223:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>l});var s=n(5479),t=n(6436),a=n(8178),o=n(60);let i=(0,n(3365).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var d=n(3659);function l(){return(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Quản l\xfd ng\xe0nh học"}),(0,s.jsx)(d.AddMajorDialog,{children:(0,s.jsxs)(t.$,{children:[(0,s.jsx)(i,{className:"mr-2 h-4 w-4"}),"Th\xeam ng\xe0nh học"]})})]}),(0,s.jsxs)(a.Zp,{children:[(0,s.jsx)(a.aR,{children:(0,s.jsx)(a.ZB,{children:"Danh s\xe1ch ng\xe0nh học"})}),(0,s.jsx)(a.Wu,{children:(0,s.jsx)(o.MajorsTable,{})})]})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),s=r.X(0,[273,959,910,71,936,496],()=>n(2138));module.exports=s})();