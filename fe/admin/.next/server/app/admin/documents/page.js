(()=>{var e={};e.id=327,e.ids=[327],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1225:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(2752).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2902:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(2752).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(2752).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var n=r(7025),a=r(8198),o=r(2576),l=r.n(o),i=r(5239),s={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>i[e]);r.d(t,s);let c={children:["",{children:["admin",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9300)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/documents/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,254)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,9654)),"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,3117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/documents/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/documents/page",pathname:"/admin/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4784:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>c,ZB:()=>s,Zp:()=>l,aR:()=>i});var n=r(5781),a=r(3072),o=r(7401);let l=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let s=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));s.displayName="CardTitle",a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},5315:(e,t,r)=>{"use strict";e.exports=r(7556)},5890:(e,t,r)=>{Promise.resolve().then(r.bind(r,9300))},6631:(e,t,r)=>{"use strict";r.d(t,{Fb:()=>o,gg:()=>i,iQ:()=>l,u7:()=>a});let n="http://localhost:8001/api/v1";async function a(){try{let e=await fetch(`${n}/subjects`);if(!e.ok){let t=await e.json();throw Error(t.detail||"Kh\xf4ng thể lấy danh s\xe1ch m\xf4n học")}return e.json()}catch(e){throw console.error("Error fetching subjects:",e),e}}async function o(e){try{let t=await fetch(`${n}/subjects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.detail||"Kh\xf4ng thể th\xeam m\xf4n học")}return t.json()}catch(e){throw console.error("Error creating subject:",e),e}}async function l(e,t){try{let r=await fetch(`${n}/subjects/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.detail||"Kh\xf4ng thể cập nhật m\xf4n học")}return r.json()}catch(e){throw console.error("Error updating subject:",e),e}}async function i(e){try{let t=await fetch(`${n}/subjects/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.detail||"Kh\xf4ng thể x\xf3a m\xf4n học")}}catch(e){throw console.error("Error deleting subject:",e),e}}},7556:(e,t,r)=>{"use strict";var n=r(3072),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,l=n.useEffect,i=n.useLayoutEffect,s=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,d=n[1];return i(function(){a.value=r,a.getSnapshot=t,c(a)&&d({inst:a})},[e,r,t]),l(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),s(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},9098:(e,t,r)=>{Promise.resolve().then(r.bind(r,9354))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9300:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(1129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/documents/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dinh-tran/Documents/project/udulib-repo/fe/admin/app/admin/documents/page.tsx","default")},9354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>e2});var n=r(5781),a=r(3072),o=r.t(a,2),l=r(4238),i=r(4784),s=r(9575),c=r(1978),d=r(4132),u=r(9839),p=r(3352),f=r(8414),m=r(4915);r(6631);var h=r(1153);async function g(e){try{let t=await fetch("http://localhost:8001/api/v1/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag_name:e})});if(!t.ok)throw console.error("Error creating tag:",t.status,t.statusText),Error(`Kh\xf4ng thể tạo tag: ${t.statusText}`);let r=await t.json();return m.oR.success("Tạo tag th\xe0nh c\xf4ng"),r}catch(e){throw console.error("Error in createTag:",e),m.oR.error("Kh\xf4ng thể tạo tag mới"),e}}async function v(e,t){try{let r=await fetch(`http://localhost:8001/api/v1/documents/${e}/tags`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag_names:t})});if(!r.ok)throw console.error("Error adding document tags:",r.status,r.statusText),Error(`Kh\xf4ng thể th\xeam tags cho t\xe0i liệu: ${r.statusText}`)}catch(e){throw console.error("Error in addDocumentTags:",e),e}}var x=r(9173),y=r(4186),b=r(9252),w=/[\\\/_+.#"@\[\(\{&]/,j=/[\\\/_+.#"@\[\(\{&]/g,E=/[\s-]/,C=/[\s-]/g;function k(e){return e.toLowerCase().replace(C," ")}var N=r(6033);function S(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}r(6129);var R=Symbol("radix.slottable");function A(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===R}var P=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){var o;let e,l;let i=(o=r,(l=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(l=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),s=function(e,t){let r={...t};for(let n in t){let a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...e)=>{let t=o(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...o}:"className"===n&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(s.ref=t?function(...e){return t=>{let r=!1,n=e.map(e=>{let n=S(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():S(e[t],null)}}}}(t,i):i),a.cloneElement(r,s)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:o,...l}=e,i=a.Children.toArray(o),s=i.find(A);if(s){let e=s.props.children,o=i.map(t=>t!==s?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...l,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,o):null})}return(0,n.jsx)(t,{...l,ref:r,children:o})});return r.displayName=`${e}.Slot`,r}(`Primitive.${t}`),o=a.forwardRef((e,a)=>{let{asChild:o,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o?r:t,{...l,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),_=globalThis?.document?a.useLayoutEffect:()=>{},D=o[" useId ".trim().toString()]||(()=>void 0),O=0;function T(e){let[t,r]=a.useState(D());return _(()=>{e||r(e=>e??String(O++))},[e]),e||(t?`radix-${t}`:"")}var I=r(5315),M='[cmdk-group=""]',$='[cmdk-group-items=""]',F='[cmdk-item=""]',q=`${F}:not([aria-disabled="true"])`,K="cmdk-item-select",L="data-value",V=(e,t,r)=>(function(e,t,r){return function e(t,r,n,a,o,l,i){if(l===r.length)return o===t.length?1:.99;var s=`${o},${l}`;if(void 0!==i[s])return i[s];for(var c,d,u,p,f=a.charAt(l),m=n.indexOf(f,o),h=0;m>=0;)(c=e(t,r,n,a,m+1,l+1,i))>h&&(m===o?c*=1:w.test(t.charAt(m-1))?(c*=.8,(u=t.slice(o,m-1).match(j))&&o>0&&(c*=Math.pow(.999,u.length))):E.test(t.charAt(m-1))?(c*=.9,(p=t.slice(o,m-1).match(C))&&o>0&&(c*=Math.pow(.999,p.length))):(c*=.17,o>0&&(c*=Math.pow(.999,m-o))),t.charAt(m)!==r.charAt(l)&&(c*=.9999)),(c<.1&&n.charAt(m-1)===a.charAt(l+1)||a.charAt(l+1)===a.charAt(l)&&n.charAt(m-1)!==a.charAt(l))&&.1*(d=e(t,r,n,a,m+1,l+2,i))>c&&(c=.1*d),c>h&&(h=c),m=n.indexOf(f,m+1);return i[s]=h,h}(e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,t,k(e),k(t),0,0,{})})(e,t,r),z=a.createContext(void 0),G=()=>a.useContext(z),J=a.createContext(void 0),W=()=>a.useContext(J),Z=a.createContext(void 0),B=a.forwardRef((e,t)=>{let r=ea(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=ea(()=>new Set),o=ea(()=>new Map),l=ea(()=>new Map),i=ea(()=>new Set),s=er(e),{label:c,children:d,value:u,onValueChange:p,filter:f,shouldFilter:m,loop:h,disablePointerSelection:g=!1,vimBindings:v=!0,...x}=e,y=T(),b=T(),w=T(),j=a.useRef(null),E=es();en(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,C.emit()}},[u]),en(()=>{E(6,_)},[]);let C=a.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var a,o,l;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)A(),S(),E(1,R);else if("value"===e&&(n||E(5,_),(null==(a=s.current)?void 0:a.value)!==void 0)){null==(l=(o=s.current).onValueChange)||l.call(o,null!=t?t:"");return}C.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),k=a.useMemo(()=>({value:(e,t,n)=>{var a;t!==(null==(a=l.current.get(e))?void 0:a.value)&&(l.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,N(t,n)),E(2,()=>{S(),C.emit()}))},item:(e,t)=>(n.current.add(e),t&&(o.current.has(t)?o.current.get(t).add(e):o.current.set(t,new Set([e]))),E(3,()=>{A(),S(),r.current.value||R(),C.emit()}),()=>{l.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=D();E(4,()=>{A(),(null==t?void 0:t.getAttribute("id"))===e&&R(),C.emit()})}),group:e=>(o.current.has(e)||o.current.set(e,new Set),()=>{l.current.delete(e),o.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:y,inputId:w,labelId:b,listInnerRef:j}),[]);function N(e,t){var n,a;let o=null!=(a=null==(n=s.current)?void 0:n.filter)?a:V;return e?o(e,r.current.search,t):0}function S(){if(!r.current.search||!1===s.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=o.current.get(r),a=0;n.forEach(t=>{a=Math.max(e.get(t),a)}),t.push([r,a])});let n=j.current;O().sort((t,r)=>{var n,a;let o=t.getAttribute("id"),l=r.getAttribute("id");return(null!=(n=e.get(l))?n:0)-(null!=(a=e.get(o))?a:0)}).forEach(e=>{let t=e.closest($);t?t.appendChild(e.parentElement===t?e:e.closest(`${$} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${$} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=j.current)?void 0:t.querySelector(`${M}[${L}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function R(){let e=O().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(L);C.setState("value",t||void 0)}function A(){var e,t,a,i;if(!r.current.search||!1===s.current.shouldFilter){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let c=0;for(let o of n.current){let n=N(null!=(t=null==(e=l.current.get(o))?void 0:e.value)?t:"",null!=(i=null==(a=l.current.get(o))?void 0:a.keywords)?i:[]);r.current.filtered.items.set(o,n),n>0&&c++}for(let[e,t]of o.current)for(let n of t)if(r.current.filtered.items.get(n)>0){r.current.filtered.groups.add(e);break}r.current.filtered.count=c}function _(){var e,t,r;let n=D();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(M))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function D(){var e;return null==(e=j.current)?void 0:e.querySelector(`${F}[aria-selected="true"]`)}function O(){var e;return Array.from((null==(e=j.current)?void 0:e.querySelectorAll(q))||[])}function I(e){let t=O()[e];t&&C.setState("value",t.getAttribute(L))}function G(e){var t;let r=D(),n=O(),a=n.findIndex(e=>e===r),o=n[a+e];null!=(t=s.current)&&t.loop&&(o=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),o&&C.setState("value",o.getAttribute(L))}function W(e){let t=D(),r=null==t?void 0:t.closest(M),n;for(;r&&!n;)n=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,M):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,M))?void 0:r.querySelector(q);n?C.setState("value",n.getAttribute(L)):G(e)}let Z=()=>I(O().length-1),B=e=>{e.preventDefault(),e.metaKey?Z():e.altKey?W(1):G(1)},U=e=>{e.preventDefault(),e.metaKey?I(0):e.altKey?W(-1):G(-1)};return a.createElement(P.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=x.onKeyDown)||t.call(x,e),!e.defaultPrevented)switch(e.key){case"n":case"j":v&&e.ctrlKey&&B(e);break;case"ArrowDown":B(e);break;case"p":case"k":v&&e.ctrlKey&&U(e);break;case"ArrowUp":U(e);break;case"Home":e.preventDefault(),I(0);break;case"End":e.preventDefault(),Z();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=D();if(t){let e=new Event(K);t.dispatchEvent(e)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:ed},c),ec(e,e=>a.createElement(J.Provider,{value:C},a.createElement(z.Provider,{value:k},e))))}),U=a.forwardRef((e,t)=>{var r,n;let o=T(),l=a.useRef(null),i=a.useContext(Z),s=G(),c=er(e),d=null!=(n=null==(r=c.current)?void 0:r.forceMount)?n:null==i?void 0:i.forceMount;en(()=>{if(!d)return s.item(o,null==i?void 0:i.id)},[d]);let u=ei(o,l,[e.value,e.children,l],e.keywords),p=W(),f=el(e=>e.value&&e.value===u.current),m=el(e=>!!d||!1===s.filter()||!e.search||e.filtered.items.get(o)>0);function h(){var e,t;g(),null==(t=(e=c.current).onSelect)||t.call(e,u.current)}function g(){p.setState("value",u.current,!0)}if(a.useEffect(()=>{let t=l.current;if(!(!t||e.disabled))return t.addEventListener(K,h),()=>t.removeEventListener(K,h)},[m,e.onSelect,e.disabled]),!m)return null;let{disabled:v,value:x,onSelect:y,forceMount:b,keywords:w,...j}=e;return a.createElement(P.div,{ref:eo([l,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:g,onClick:v?void 0:h},e.children)}),H=a.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:o,...l}=e,i=T(),s=a.useRef(null),c=a.useRef(null),d=T(),u=G(),p=el(e=>!!o||!1===u.filter()||!e.search||e.filtered.groups.has(i));en(()=>u.group(i),[]),ei(i,s,[e.value,e.heading,c]);let f=a.useMemo(()=>({id:i,forceMount:o}),[o]);return a.createElement(P.div,{ref:eo([s,t]),...l,"cmdk-group":"",role:"presentation",hidden:!p||void 0},r&&a.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),ec(e,e=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},a.createElement(Z.Provider,{value:f},e))))}),X=a.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,o=a.useRef(null),l=el(e=>!e.search);return r||l?a.createElement(P.div,{ref:eo([o,t]),...n,"cmdk-separator":"",role:"separator"}):null}),Q=a.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,o=null!=e.value,l=W(),i=el(e=>e.search),s=el(e=>e.value),c=G(),d=a.useMemo(()=>{var e;let t=null==(e=c.listInnerRef.current)?void 0:e.querySelector(`${F}[${L}="${encodeURIComponent(s)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return a.useEffect(()=>{null!=e.value&&l.setState("search",e.value)},[e.value]),a.createElement(P.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:o?e.value:i,onChange:e=>{o||l.setState("search",e.target.value),null==r||r(e.target.value)}})}),Y=a.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...o}=e,l=a.useRef(null),i=a.useRef(null),s=G();return a.useEffect(()=>{if(i.current&&l.current){let e=i.current,t=l.current,r,n=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return n.observe(e),()=>{cancelAnimationFrame(r),n.unobserve(e)}}},[]),a.createElement(P.div,{ref:eo([l,t]),...o,"cmdk-list":"",role:"listbox","aria-label":n,id:s.listId},ec(e,e=>a.createElement("div",{ref:eo([i,s.listInnerRef]),"cmdk-list-sizer":""},e)))}),ee=a.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:o,contentClassName:l,container:i,...s}=e;return a.createElement(N.bL,{open:r,onOpenChange:n},a.createElement(N.ZL,{container:i},a.createElement(N.hJ,{"cmdk-overlay":"",className:o}),a.createElement(N.UC,{"aria-label":e.label,"cmdk-dialog":"",className:l},a.createElement(B,{ref:t,...s}))))}),et=Object.assign(B,{List:Y,Item:U,Input:Q,Group:H,Separator:X,Dialog:ee,Empty:a.forwardRef((e,t)=>el(e=>0===e.filtered.count)?a.createElement(P.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:a.forwardRef((e,t)=>{let{progress:r,children:n,label:o="Loading...",...l}=e;return a.createElement(P.div,{ref:t,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ec(e,e=>a.createElement("div",{"aria-hidden":!0},e)))})});function er(e){let t=a.useRef(e);return en(()=>{t.current=e}),t}var en=a.useEffect;function ea(e){let t=a.useRef();return void 0===t.current&&(t.current=e()),t}function eo(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function el(e){let t=W(),r=()=>e(t.snapshot());return(0,I.useSyncExternalStore)(t.subscribe,r,r)}function ei(e,t,r,n=[]){let o=a.useRef(),l=G();return en(()=>{var a;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():o.current}})(),s=n.map(e=>e.trim());l.value(e,i,s),null==(a=t.current)||a.setAttribute(L,i),o.current=i}),o}var es=()=>{let[e,t]=a.useState(),r=ea(()=>new Map);return en(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function ec({asChild:e,children:t},r){let n;return e&&a.isValidElement(t)?a.cloneElement("function"==typeof(n=t.type)?n(t.props):"render"in n?n.render(t.props):t,{ref:t.ref},r(t.props.children)):r(t)}var ed={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},eu=r(2902),ep=r(7401);let ef=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(et,{ref:r,className:(0,ep.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));ef.displayName=et.displayName;let em=a.forwardRef(({className:e,...t},r)=>(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(eu.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(et.Input,{ref:r,className:(0,ep.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));em.displayName=et.Input.displayName,a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(et.List,{ref:r,className:(0,ep.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})).displayName=et.List.displayName;let eh=a.forwardRef((e,t)=>(0,n.jsx)(et.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));eh.displayName=et.Empty.displayName;let eg=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(et.Group,{ref:r,className:(0,ep.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));eg.displayName=et.Group.displayName,a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(et.Separator,{ref:r,className:(0,ep.cn)("-mx-1 h-px bg-border",e),...t})).displayName=et.Separator.displayName;let ev=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(et.Item,{ref:r,className:(0,ep.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));ev.displayName=et.Item.displayName;var ex=r(5271),ey=r(1049),eb=r(2225),ew=r(9168),ej=r(1086),eE=r(8020),eC=r(1128),ek=r(9684),eN=r(2804),eS=r(4344),eR=r(9151),eA=r(6499),eP=r(2876),e_=r(5097),eD=r(8506),eO="Popover",[eT,eI]=(0,eb.A)(eO,[ek.Bk]),eM=(0,ek.Bk)(),[e$,eF]=eT(eO),eq=e=>{let{__scopePopover:t,children:r,open:o,defaultOpen:l,onOpenChange:i,modal:s=!1}=e,c=eM(t),d=a.useRef(null),[u,p]=a.useState(!1),[f=!1,m]=(0,eP.i)({prop:o,defaultProp:l,onChange:i});return(0,n.jsx)(ek.bL,{...c,children:(0,n.jsx)(e$,{scope:t,contentId:(0,eC.B)(),triggerRef:d,open:f,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:u,onCustomAnchorAdd:a.useCallback(()=>p(!0),[]),onCustomAnchorRemove:a.useCallback(()=>p(!1),[]),modal:s,children:r})})};eq.displayName=eO;var eK="PopoverAnchor";a.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,l=eF(eK,r),i=eM(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:c}=l;return a.useEffect(()=>(s(),()=>c()),[s,c]),(0,n.jsx)(ek.Mz,{...i,...o,ref:t})}).displayName=eK;var eL="PopoverTrigger",eV=a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,o=eF(eL,r),l=eM(r),i=(0,ey.s)(t,o.triggerRef),s=(0,n.jsx)(eR.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":eY(o.open),...a,ref:i,onClick:(0,ex.m)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:(0,n.jsx)(ek.Mz,{asChild:!0,...l,children:s})});eV.displayName=eL;var ez="PopoverPortal",[eG,eJ]=eT(ez,{forceMount:void 0}),eW=e=>{let{__scopePopover:t,forceMount:r,children:a,container:o}=e,l=eF(ez,t);return(0,n.jsx)(eG,{scope:t,forceMount:r,children:(0,n.jsx)(eS.C,{present:r||l.open,children:(0,n.jsx)(eN.Z,{asChild:!0,container:o,children:a})})})};eW.displayName=ez;var eZ="PopoverContent",eB=a.forwardRef((e,t)=>{let r=eJ(eZ,e.__scopePopover),{forceMount:a=r.forceMount,...o}=e,l=eF(eZ,e.__scopePopover);return(0,n.jsx)(eS.C,{present:a||l.open,children:l.modal?(0,n.jsx)(eU,{...o,ref:t}):(0,n.jsx)(eH,{...o,ref:t})})});eB.displayName=eZ;var eU=a.forwardRef((e,t)=>{let r=eF(eZ,e.__scopePopover),o=a.useRef(null),l=(0,ey.s)(t,o),i=a.useRef(!1);return a.useEffect(()=>{let e=o.current;if(e)return(0,e_.Eq)(e)},[]),(0,n.jsx)(eD.A,{as:eA.DX,allowPinchZoom:!0,children:(0,n.jsx)(eX,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,ex.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,ex.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;i.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,ex.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eH=a.forwardRef((e,t)=>{let r=eF(eZ,e.__scopePopover),o=a.useRef(!1),l=a.useRef(!1);return(0,n.jsx)(eX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||r.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"!==t.detail.originalEvent.type||(l.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),eX=a.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...p}=e,f=eF(eZ,r),m=eM(r);return(0,ej.Oh)(),(0,n.jsx)(eE.n,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:l,children:(0,n.jsx)(ew.qW,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:(0,n.jsx)(ek.UC,{"data-state":eY(f.open),role:"dialog",id:f.contentId,...m,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eQ="PopoverClose";function eY(e){return e?"open":"closed"}a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,o=eF(eQ,r);return(0,n.jsx)(eR.sG.button,{type:"button",...a,ref:t,onClick:(0,ex.m)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=eQ,a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,o=eM(r);return(0,n.jsx)(ek.i3,{...o,...a,ref:t})}).displayName="PopoverArrow";let e0=a.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},o)=>(0,n.jsx)(eW,{children:(0,n.jsx)(eB,{ref:o,align:t,sideOffset:r,className:(0,ep.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));function e1({open:e,onOpenChange:t,onSuccess:r}){let[o,i]=(0,a.useState)(!1),[s,w]=(0,a.useState)([]),[j,E]=(0,a.useState)([]),[C,k]=(0,a.useState)([]),[N,S]=(0,a.useState)(""),[R,A]=(0,a.useState)(!1),P=async e=>{e.preventDefault(),i(!0);try{let n=new FormData(e.currentTarget);n.get("title"),n.get("description"),n.get("subject_id"),n.get("file");let a=await (0,h.ui)(n);if(!a)throw Error("Kh\xf4ng thể tạo t\xe0i liệu");C.length>0&&await v(a.document_id,C),m.oR.success("Tạo t\xe0i liệu th\xe0nh c\xf4ng"),t(!1),r?.()}catch(e){console.error("Error creating document:",e),m.oR.error("Kh\xf4ng thể tạo t\xe0i liệu mới")}finally{i(!1)}},_=async()=>{if(N.trim())try{let e=j.find(e=>e.tag_name.toLowerCase()===N.toLowerCase());if(e)C.includes(e.tag_name)||k([...C,e.tag_name]);else{let e=await g(N);e&&(E([...j,e]),k([...C,e.tag_name]))}S("")}catch(e){console.error("Error adding tag:",e)}},D=e=>{k(C.filter(t=>t!==e))},O=e=>{C.includes(e)||k([...C,e]),A(!1)};return(0,n.jsx)(c.lG,{open:e,onOpenChange:t,children:(0,n.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(c.c7,{children:[(0,n.jsx)(c.L3,{children:"Tạo t\xe0i liệu mới"}),(0,n.jsx)(c.rr,{children:"Th\xeam t\xe0i liệu mới v\xe0o hệ thống. Nhấn Lưu khi ho\xe0n tất."})]}),(0,n.jsxs)("form",{onSubmit:P,children:[(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(u.J,{htmlFor:"title",className:"text-right",children:"T\xean t\xe0i liệu"}),(0,n.jsx)(d.p,{id:"title",name:"title",className:"col-span-3",required:!0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(u.J,{htmlFor:"description",className:"text-right",children:"M\xf4 tả"}),(0,n.jsx)(p.T,{id:"description",name:"description",className:"col-span-3"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(u.J,{htmlFor:"subject_id",className:"text-right",children:"M\xf4n học"}),(0,n.jsxs)(f.Select,{name:"subject_id",required:!0,children:[(0,n.jsx)(f.SelectTrigger,{className:"col-span-3",children:(0,n.jsx)(f.SelectValue,{placeholder:"Chọn m\xf4n học"})}),(0,n.jsx)(f.SelectContent,{children:s.map(e=>(0,n.jsx)(f.SelectItem,{value:e.subject_id.toString(),children:e.subject_name},e.subject_id))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(u.J,{htmlFor:"file",className:"text-right",children:"File"}),(0,n.jsx)(d.p,{id:"file",name:"file",type:"file",className:"col-span-3",required:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(u.J,{className:"text-right",children:"Tags"}),(0,n.jsxs)("div",{className:"col-span-3 space-y-2",children:[(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsxs)(eq,{open:R,onOpenChange:A,children:[(0,n.jsx)(eV,{asChild:!0,children:(0,n.jsxs)(l.$,{variant:"outline",role:"combobox","aria-expanded":R,className:"w-full justify-between",children:["Chọn tag c\xf3 sẵn",(0,n.jsx)(y.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(e0,{className:"w-full p-0",children:(0,n.jsxs)(ef,{children:[(0,n.jsx)(em,{placeholder:"T\xecm kiếm tag..."}),(0,n.jsx)(eh,{children:"Kh\xf4ng t\xecm thấy tag."}),(0,n.jsx)(eg,{children:j.map(e=>(0,n.jsx)(ev,{onSelect:()=>O(e.tag_name),children:e.tag_name},e.tag_id))})]})})]})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(d.p,{value:N,onChange:e=>S(e.target.value),placeholder:"Nhập tag mới",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),_())}}),(0,n.jsx)(l.$,{type:"button",variant:"outline",onClick:_,children:"Th\xeam"})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:C.map(e=>(0,n.jsxs)(x.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>D(e),className:"ml-1 hover:text-destructive",children:(0,n.jsx)(b.A,{className:"h-3 w-3"})})]},e))})]})]})]}),(0,n.jsx)(c.Es,{children:(0,n.jsx)(l.$,{type:"submit",disabled:o,children:o?"Đang lưu...":"Lưu"})})]})]})})}function e2(){let[e,t]=(0,a.useState)(0),[r,o]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"container py-6",children:[(0,n.jsxs)(i.Zp,{children:[(0,n.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(i.ZB,{children:"T\xe0i liệu"}),(0,n.jsx)(l.$,{onClick:()=>o(!0),children:"Th\xeam t\xe0i liệu"})]}),(0,n.jsx)(i.Wu,{children:(0,n.jsx)(s.DocumentsTable,{},e)})]}),(0,n.jsx)(e1,{open:r,onOpenChange:o,onSuccess:()=>{t(e=>e+1)}})]})}e0.displayName=eB.displayName}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[273,959,910,667,936,496,575],()=>r(4208));module.exports=n})();